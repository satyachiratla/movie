{"ast":null,"code":"var _jsxFileName = \"/Users/vivekchowdary/My World/MovieHTTP/src/App.js\";\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport MoviesList from \"./components/MoviesList\";\nimport \"./App.css\";\nimport AddMovie from \"./components/AddMovie\";\n\nfunction App() {\n  const dummyMovies = [{\n    id: 1,\n    title: \"Game Of Thrones\",\n    openingText: \"Nine noble families fought to win the Iron Throne.\",\n    releaseDate: \"2011-05-18\"\n  }, {\n    id: 2,\n    title: \"Stranger Things\",\n    openingText: \"This is the second opening text of the movie\",\n    releaseDate: \"2016-05-19\"\n  }];\n  const [movies, setMovies] = useState(dummyMovies);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null); // const api_key = \"https://api.themoviedb.org/3/tv/popular?api_key=de9929f37ff02f5324c8210f01ea2eff\";\n  //const api = \"https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=de9929f37ff02f5324c8210f01ea2eff\"\n\n  const api_key = 'https://movie-1cdc7-default-rtdb.firebaseio.com/movies.json';\n  const fetchMoviesHandler = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch(api_key);\n\n      if (!response.ok) {\n        throw new Error(\"Something went wrong!\");\n      }\n\n      const data = await response.json();\n      let loadedMovies = [];\n\n      for (const key in data) {\n        loadedMovies.push({\n          id: key,\n          title: data[key].title,\n          openingText: data[key].openingText,\n          releaseDate: data[key].releaseDate\n        });\n      }\n\n      const transformedMovies = data.results.map(dataMovie => {\n        return {\n          id: dataMovie.id,\n          title: dataMovie.name,\n          openingText: dataMovie.overview,\n          releaseDate: dataMovie.first_air_data\n        };\n      });\n      setMovies(transformedMovies);\n    } catch (error) {\n      setError(error.message);\n    }\n\n    setIsLoading(false);\n  }, []);\n  useEffect(() => {\n    fetchMoviesHandler();\n  }, [fetchMoviesHandler]);\n\n  const addMovieHandler = async movie => {\n    const response = await fetch(api_key, {\n      method: \"POST\",\n      body: JSON.stringify(movie),\n      headers: {\n        \"Content-Type\": 'application/json'\n      }\n    });\n    const data = await response.json();\n    console.log(data);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(AddMovie, {\n    onAddMovie: addMovieHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(\"section\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: fetchMoviesHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, \"Fetch Movies\")), /*#__PURE__*/React.createElement(\"section\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, !isLoading && movies.length > 0 && /*#__PURE__*/React.createElement(MoviesList, {\n    movies: movies,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 45\n    }\n  }), !isLoading && movies.length === 0 && !error && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 57\n    }\n  }, \"Found No Movies!\"), !isLoading && error && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 33\n    }\n  }, error), isLoading && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 23\n    }\n  }, \"Loading...\")));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/vivekchowdary/My World/MovieHTTP/src/App.js"],"names":["React","useEffect","useState","useCallback","MoviesList","AddMovie","App","dummyMovies","id","title","openingText","releaseDate","movies","setMovies","isLoading","setIsLoading","error","setError","api_key","fetchMoviesHandler","response","fetch","ok","Error","data","json","loadedMovies","key","push","transformedMovies","results","map","dataMovie","name","overview","first_air_data","message","addMovieHandler","movie","method","body","JSON","stringify","headers","console","log","length"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\n\nimport MoviesList from \"./components/MoviesList\";\nimport \"./App.css\";\nimport AddMovie from \"./components/AddMovie\";\n\nfunction App() {\n  const dummyMovies = [\n    {\n      id: 1,\n      title: \"Game Of Thrones\",\n      openingText: \"Nine noble families fought to win the Iron Throne.\",\n      releaseDate: \"2011-05-18\",\n    },\n    {\n      id: 2,\n      title: \"Stranger Things\",\n      openingText: \"This is the second opening text of the movie\",\n      releaseDate: \"2016-05-19\",\n    },\n  ];\n\n  const [movies, setMovies] = useState(dummyMovies);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n // const api_key = \"https://api.themoviedb.org/3/tv/popular?api_key=de9929f37ff02f5324c8210f01ea2eff\";\n  //const api = \"https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=de9929f37ff02f5324c8210f01ea2eff\"\n  const api_key = 'https://movie-1cdc7-default-rtdb.firebaseio.com/movies.json'\n\n  const fetchMoviesHandler = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const response = await fetch(api_key);\n\n      if (!response.ok) {\n        throw new Error(\"Something went wrong!\");\n      }\n\n      const data = await response.json();\n\n      let loadedMovies = []\n\n      for (const key in data) {\n        loadedMovies.push({\n          id: key,\n          title: data[key].title,\n          openingText: data[key].openingText,\n          releaseDate: data[key].releaseDate\n        })\n      }\n      const transformedMovies = data.results.map((dataMovie) => {\n        return {\n          id: dataMovie.id,\n          title: dataMovie.name,\n          openingText: dataMovie.overview,\n          releaseDate: dataMovie.first_air_data,\n        };\n      });\n      setMovies(transformedMovies);\n    } catch (error) {\n      setError(error.message);\n    }\n    setIsLoading(false);\n  }, [])\n\n  useEffect(() => {\n    fetchMoviesHandler()\n  }, [fetchMoviesHandler])\n\n  const addMovieHandler = async (movie) => {\n    const response = await fetch(api_key, {\n      method: \"POST\",\n      body: JSON.stringify(movie),\n      headers: {\n        \"Content-Type\": 'application/json'\n      }\n    })\n    const data = await response.json();\n    console.log(data);\n  }\n\n  return (\n    <React.Fragment>\n      <section>\n      <AddMovie onAddMovie={addMovieHandler} /> \n      </section>\n      <section>\n        <button onClick={fetchMoviesHandler}>Fetch Movies</button>\n      </section>\n      <section>\n        {!isLoading && movies.length > 0 && <MoviesList movies={movies} />}\n        {!isLoading && movies.length === 0 && !error && <p>Found No Movies!</p>}\n        {!isLoading && error && <p>{error}</p>}\n        {isLoading && <p>Loading...</p>}\n      </section>\n    </React.Fragment>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}